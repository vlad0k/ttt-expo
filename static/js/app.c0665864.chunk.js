(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{85:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(2),l=n(3),c=n(21),i=n(76),s=n(45),u=n.n(s),m=n(16),f=n.n(m),d=n(77),g=n.n(d).a.create({baseURL:"https://ttt-expo-server.herokuapp.com/"}),p=function(){return g.get("start").then((function(e){return e.data}))},y=function(e,t,n){return g.post("move",{instanceId:e,player:t,cell:n}).then((function(e){return e.data}))},b=function(e,t){var n=new WebSocket("wss://ttt-expo-server.herokuapp.com/"+e+"/"+t);return n.onopen=function(){console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e. id=",t)},n.onerror=function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 "+e.message)},n};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={gameId:null,player:null,table:[],move:"X",win:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START":return w({},e,{gameId:t.gameId,player:t.player,table:u()(t.table),move:t.move});case"MOVE":return w({},e,{table:u()(t.table),move:t.move});case"WIN":return w({},e,{win:t.win});case"RESTART":return w({},e,{player:null,win:null});default:return e}},x=function(e,t){return{type:"MOVE",table:e,move:t}},O=Object(c.c)({tictactoe:h}),S=Object(c.d)(O,Object(c.a)(i.a));window.store=S;var I=S,j=n(18),W=function(e){return e.tictactoe.gameId},k=function(e){return e.tictactoe.player},T=function(e){return e.tictactoe.table},P=function(e){return e.tictactoe.move},D=function(e){return e.tictactoe.win},M=n(5),R=n(36),z=function(e){var t=e.gameStart;e.className,e.startButtonClassName;return a.a.createElement(l.a,{style:A.container},a.a.createElement(M.a,{style:A.startText},"Press the ",a.a.createElement(M.a,{style:A.buttonStyledText},"Start Button")," to start the game"),a.a.createElement(l.a,{style:A.startButton},a.a.createElement(R.a,{color:"skyblue",onPress:function(e){e.preventDefault(),t()},type:"submit",title:"Start"})))},A=o.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",flexDirection:"column"},startText:{fontSize:32,textAlign:"center"},buttonStyledText:{fontSize:36,color:"skyblue",fontWeight:"bold"},startButton:{marginTop:16}}),C=n(39),B=function(e){var t=e.handleMove,n=e.id,r=e.value,o=(e.className,e.gameId),l=e.player,c=e.win;return a.a.createElement(C.a,{style:N.cell,onPress:function(){return t(o,l,n,c,r)}},a.a.createElement(M.a,{style:N.fig},r[n]?r[n]:""))},N=o.a.create({cell:{width:92,height:92,display:"flex",alignItems:"center",justifyContent:"center",borderWidth:4,color:"blue",borderColor:"skyblue",fontWeight:"bold",margin:2},fig:{fontSize:72,color:"blue",textAlign:"center",fontWeight:"bold"}}),G=Object(j.b)((function(e){return{value:T(e),gameId:W(e),player:k(e),win:D(e)}}),{handleMove:function(e,t,n,r,a){return function(o){r||a[n]||y(e,t,n).then((function(e){console.log("post move: ",e.move),o(x(e.table,e.move))}))}}})((function(e){return a.a.createElement(B,e)})),J=function(){return a.a.createElement(l.a,{style:L.table},a.a.createElement(l.a,{style:L.row},a.a.createElement(G,{id:0}),a.a.createElement(G,{id:1}),a.a.createElement(G,{id:2})),a.a.createElement(l.a,{style:L.row},a.a.createElement(G,{id:3}),a.a.createElement(G,{id:4}),a.a.createElement(G,{id:5})),a.a.createElement(l.a,{style:L.row},a.a.createElement(G,{id:6}),a.a.createElement(G,{id:7}),a.a.createElement(G,{id:8})))},L=o.a.create({table:{flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center",padding:10},row:{display:"flex",flexDirection:"row"}}),V=function(e){var t=e.gameId,n=e.player,r=e.move,o=e.win,c=e.gameStart,i=e.restart;return a.a.createElement(l.a,{style:F.game},!n&&a.a.createElement(z,{gameStart:c}),n&&a.a.createElement(R.a,{title:"Restart",onPress:i}),n&&a.a.createElement(l.a,{style:F.header},a.a.createElement(l.a,null,a.a.createElement(M.a,{style:F.player},"Player: ",n)),a.a.createElement(l.a,null,a.a.createElement(M.a,{style:F.gameId},"Game ID: ",t))),n&&a.a.createElement(J,null),a.a.createElement(l.a,{style:F.winWrapper},!o&&n&&a.a.createElement(M.a,{style:F.nowMove},"Move: ",a.a.createElement(M.a,{style:r===n?F.nowMoveGreen:F.nowMoveRed},r))),o&&("Draw"!==o?a.a.createElement(l.a,null,a.a.createElement(M.a,{style:o===n?F.win:F.loose},"Winner is: ",o)):a.a.createElement(l.a,null,a.a.createElement(M.a,{style:F.draw},o))))},F=o.a.create({game:{},header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:30},player:{fontSize:24,fontWeight:"bold"},gameId:{fontSize:24,fontWeight:"bold"},nowMove:{fontSize:24,marginBottom:60},nowMoveGreen:{color:"green",fontWeight:"bold"},nowMoveRed:{color:"red",fontWeight:"bold"},win:{textAlign:"center",fontSize:24,color:"green",fontWeight:"bold"},loose:{textAlign:"center",fontSize:24,color:"red",fontWeight:"bold"},draw:{textAlign:"center",fontSize:24,color:"blue",fontWeight:"bold"}}),U=Object(j.b)((function(e){return{gameId:W(e),player:k(e),move:P(e),win:D(e)}}),{gameStart:function(){return function(e){p().then((function(t){var n,r,a,o;e((n=t.gameId,r=t.player,a=t.table,o=t.move,{type:"START",gameId:n,player:r,table:a,move:o})),b("table",t.gameId).onmessage=function(t){console.log("tabe: ",t.data);var n=JSON.parse(t.data);e(x(n.table,n.move))},b("win",t.gameId).onmessage=function(t){console.log(t.data),e({type:"WIN",win:t.data})}}))}},restart:function(){return function(e){console.log("restart"),e({type:"RESTART"})}}})(V);function X(){return a.a.createElement(j.a,{store:I},a.a.createElement(l.a,{style:q.container},a.a.createElement(U,null)))}n.d(t,"a",(function(){return X}));var q=o.a.create({container:{flex:1,backgroundColor:"#fff",justifyContent:"center",alignItems:"center",marginTop:64,marginBottom:30,padding:8}})},86:function(e,t,n){n(87),e.exports=n(133)},87:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/ttt-expo/expo-service-worker.js",{scope:"/ttt-expo/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[86,1,2]]]);
//# sourceMappingURL=app.c0665864.chunk.js.map